<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- Option 1: Include in HTML -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Upload File</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <nav class="navbar navbar-light bg-light">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">
              <img
                src="./watermark-logo-01.png"
                alt=""
                width="150"
                height="24"
                class="d-inline-block align-text-top"
              />
            </a>
          </div>
        </nav>

        <div class="main12">
          <div
            class="col-lg-6 col-md-12"
            style="
              /* display: flex; */
              justify-content: center;
              align-items: flex-start;
              margin-top: 4rem;
            "
          >
            <div class="wallImg1">
              <div class="wallImg">
                <img src="./watermark-r.jpeg" alt="" />
              </div>
              <div class="wallSecond">
                <div style="width: 100%">
                  <h3
                    style="
                      display: flex;
                      justify-content: center;
                      text-align: center;
                    "
                  >
                    Apply Watermark From Your Images
                  </h3>
                  <p
                    style="
                      display: flex;
                      justify-content: center;
                      align-items: center;
                    "
                  >100% Automatically</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-12">
            <div class="wrapper">
              <br />
              <br />
              <br />
              <div class="box pl-0">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="flexSwitchCheckDefault"
                    onclick="Switch1()"
                  />
                  <label class="form-check-label" for="flexSwitchCheckDefault"
                    >Image Watermark</label
                  >
                </div>
                <!-- <p id="status"></p> -->
                <div id="keyboard_box">
                  <div class="keyboard_box">
                    <div class="typeKeyboard">
                      <textarea
                        type="text"
                        id="demo"
                        class="typeval"
                        placeholder="Ice Skating"
                        readonly=""
                        value=""
                      >
                      </textarea>
                    </div>
                    <div
                      class="Keyboard-module"
                      role="group"
                      aria-label="Keyboard"
                    >
                      <div class="mx-auto">
                        <div
                          class="Keyboard-module_row my-2 flex items-center gap1"
                        >
                          <button
                            type="button"
                            data-key="Q"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            q</button
                          ><button
                            type="button"
                            data-key="W"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            w</button
                          ><button
                            type="button"
                            data-key="E"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            e</button
                          ><button
                            type="button"
                            data-key="R"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            r</button
                          ><button
                            type="button"
                            data-key="T"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            t</button
                          ><button
                            type="button"
                            data-key="Y"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            y</button
                          ><button
                            type="button"
                            data-key="U"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            u</button
                          ><button
                            type="button"
                            data-key="I"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            i</button
                          ><button
                            type="button"
                            data-key="O"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            o</button
                          ><button
                            type="button"
                            data-key="P"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            p
                          </button>
                        </div>
                        <div
                          class="Keyboard-module_row my-2 flex items-center gap1"
                        >
                          <div data-testid="spacer" class="keygap"></div>
                          <button
                            type="button"
                            data-key="A"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            a</button
                          ><button
                            type="button"
                            data-key="S"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            s</button
                          ><button
                            type="button"
                            data-key="D"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            d</button
                          ><button
                            type="button"
                            data-key="F"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            f</button
                          ><button
                            type="button"
                            data-key="G"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            g</button
                          ><button
                            type="button"
                            data-key="H"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            h</button
                          ><button
                            type="button"
                            data-key="J"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            j</button
                          ><button
                            type="button"
                            data-key="K"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            k</button
                          ><button
                            type="button"
                            data-key="L"
                            class="Key-module_row-button flex typebton items-center justify-center"
                          >
                            l
                          </button>
                          <div data-testid="spacer" class="keygap"></div>
                        </div>
                        <div
                          class="Keyboard-module_row my-2 flex items-center gap1"
                        >
                          <button
                            type="button"
                            id="submitbtn"
                            data-key="en"
                            class="Key-module_row-button flex specialbtn items-center justify-center Key-module_oneAndAHalf__K6JBY"
                          >
                            enter</button
                          ><button
                            type="button"
                            data-key="Z"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            z</button
                          ><button
                            type="button"
                            data-key="X"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            x</button
                          ><button
                            type="button"
                            data-key="C"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            c</button
                          ><button
                            type="button"
                            data-key="V"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            v</button
                          ><button
                            type="button"
                            data-key="B"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            b</button
                          ><button
                            type="button"
                            data-key="N"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            n</button
                          ><button
                            type="button"
                            data-key="M"
                            class="Key-module_row-button typebton flex items-center justify-center"
                          >
                            m</button
                          ><button
                            type="button"
                            data-key="back"
                            aria-label="backspace"
                            class="Key-module_row-button flex specialbtn typebton items-center justify-center Key-module_oneAndAHalf__K6JBY"
                          >
                            &nbsp;&nbsp;<svg
                              xmlns="http://www.w3.org/2000/svg"
                              height="24"
                              viewBox="0 0 24 24"
                              width="30"
                              class="game-icon"
                              data-testid="icon-backspace"
                            >
                              <path
                                fill="var(--color-tone-1)"
                                d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"
                              ></path>
                            </svg>
                            &nbsp;&nbsp;
                          </button>
                        </div>
                        <div
                          class="Keyboard-module_row my-2 flex items-center gap1"
                        >
                          <div data-testid="spacer" class="keygap"></div>
                          <button
                            type="button"
                            data-key=" "
                            class="Key-module_row-button spacebutton flex items-center justify-center"
                          >
                            Space
                          </button>
                          <div data-testid="spacer" class="keygap"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div>
                    <label for="vol"
                      >deg: <span id="degvalue">180 &deg;</span></label
                    >
                    <input
                      type="range"
                      id="vol"
                      max="360"
                      value="180"
                      onchange="range(event)"
                    />
                    <button id="submitrange">submit</button>
                  </div>
                </div>
                <div class="textwatermark" id="textwatermark">
                  <div class="input-box">
                    <input
                      type="file"
                      onchange="uploadImage(event)"
                      id="upload"
                      hidden
                      multiple
                      accept="image/*"
                    />
                    <label for="upload" class="uploadlabel">
                      <div class="imgdiv">
                        <img id="imgdiv" src="" alt="img" />
                      </div>
                      <div
                        style="
                          display: flex;
                          flex-direction: column;
                          text-align: center;
                          justify-content: center;
                        "
                      >
                        <span><i class="fa fa-cloud-upload"></i></span>
                        <p>Upload Images</p>
                        <h4>or drop a file,</h4>
                        <h5>paste image or URL</h5>
                      </div>
                    </label>
                  </div>
                  <div class="max-w-md">
                    <p
                      class="text-2xs text-typo-secondary text-center sm:!text-left !mt-4"
                      style="
                        font-size: 0.625rem;
                        line-height: 1rem;
                        color: #67727c;
                        text-align: left !important;
                      "
                    >
                      By uploading an image or URL you agree to our
                      <a
                        target="_blank"
                        class="text-typo-secondary underline"
                        draggable="false"
                        href="/tos"
                        >Terms of Service</a
                      >. This site is protected by hCaptcha and its
                      <a
                        target="_blank"
                        rel="noopener"
                        class="text-typo-secondary underline"
                        draggable="false"
                        href="https://hcaptcha.com/privacy"
                        >Privacy Policy</a
                      >
                      and
                      <a
                        target="_blank"
                        rel="noopener"
                        class="text-typo-secondary underline"
                        draggable="false"
                        href="https://hcaptcha.com/terms"
                        >Terms of Service</a
                      >
                      apply.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <footer>
          <div
            style="
              display: flex;
              justify-content: space-between;
              background-color: #bebebe;
              color: #7e7c85;
              align-items: center;
              padding: 14px 47px;
              text-align: center;
            "
          >
            <p>&copy; 2023 Your Company. All rights reserved.</p>
          </div>
        </footer>
      </div>
    </div>

    <script>
      const range = (event) => {
        const value = event.target.value;
        console.log(value);
        document.getElementById("degvalue").innerHTML = value + "&deg;";
      };

      document
        .getElementById("submitrange")
        .addEventListener("click", async () => {
          const deg = document.getElementById("vol").value;
          console.log(deg);
          try {
            const response = await axios.post(
              "https://oemdieselparts.com/pic/changewatermark",
              {
                id: "648ab1684855601a64bcdf5d",
                deg: deg,
              }
            );
            Toastify({
              text: "successfully!",
              duration: 3000, // Duration in milliseconds
              close: true, // Show a close button
              gravity: "top", // Position of the toast message (top, bottom, left, right)
            }).showToast();
          } catch (error) {
            console.error(error);
          }
        });

      function uploadImage(event) {
        event.preventDefault();
        const fileInput = document.getElementById("upload");
        const files = fileInput.files;

        if (files) {
          const formData = new FormData();
          for (var i = 0; i < files.length; i++) {
            formData.append("image", files[i]);
          }

          fetch("https://oemdieselparts.com/pic/api/imgUpload/upload", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (response.ok) {
                return response.text();
              } else {
                throw new Error("Image upload failed.");
              }
            })
            .then((imagePath) => {
              console.log(imagePath);
              const imgElement = document.getElementById("imgdiv"); // Get the <img> element by its ID

              // Set the src attribute of the <img> element
              imgElement.setAttribute("src", imagePath);
              Toastify({
                text: "successfully!",
                duration: 3000, // Duration in milliseconds
                close: true, // Show a close button
                gravity: "top", // Position of the toast message (top, bottom, left, right)
              }).showToast();
            })
            .catch((error) => {
              console.error(error);
            });
        }
      }
      const imageStyle12 = async (item1) => {
        const response1 = await axios.get(
          "https://oemdieselparts.com/pic/changewatermark"
        );
        const data = response1.data;

        document
          .getElementById(data.imagestyle + "btn")
          .classList.remove("border12");
        try {
          const response = await axios.post(
            "https://oemdieselparts.com/pic/changewatermark",
            {
              id: "648ab1684855601a64bcdf5d",
              imagestyle: item1,
            }
          );
          console.log(item1);
          document.getElementById(item1 + "btn").classList.add("border12");
        } catch (error) {
          console.error(error);
        }
      };

      const Center = async (item) => {
        const response1 = await axios.get(
          "https://oemdieselparts.com/pic/changewatermark"
        );
        const data = response1.data;
        document.getElementById("demo").value = data.watermark;
        document.getElementById(data.style).classList.remove("border12");

        style = data.style;
        style1 = item;
        try {
          const response = await axios.post(
            "https://oemdieselparts.com/pic/changewatermark",
            {
              id: "648ab1684855601a64bcdf5d",
              style: style1,
            }
          );

          document.getElementById(item).classList.add("border12");
        } catch (error) {
          console.error(error);
        }
      };
      const access_token = localStorage.getItem("access_token");
      // Assuming you have stored the token in a variable called 'token'
      const headers = {
        Authorization: `Bearer ${access_token}`,
      };

      if (!access_token) {
        window.location.href = "https://oemdieselparts.com/pic/";
      }
      var width = 0;
      let pagination = "";

    </script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      // Get the input field and all the keyboard buttons
      const inputField = document.getElementById("demo");
      const keyboardButtons = document.querySelectorAll(
        ".Key-module_row-button"
      );

      // Add click event listeners to the keyboard buttons
      keyboardButtons.forEach((button) => {
        button.addEventListener("click", () => {
          // Get the value of the clicked button
          const buttonValue = button.getAttribute("data-key");

          if (buttonValue === "Space") {
            // Update the input field value with a space character
            inputField.value += " ";
          } else if (buttonValue === "back") {
            // Remove the last character from the input field
            inputField.value = inputField.value.slice(0, -1);
          } else if (buttonValue === "en") {
            postData();
          } else {
            // Update the input field value with the clicked button value
            inputField.value += buttonValue;
          }
        });
      });
      const postData = async () => {
        try {
          const response = await axios.post(
            "https://oemdieselparts.com/pic/changewatermark",
            {
              id: "648ab1684855601a64bcdf5d",
              watermark: inputField.value,
            }
          );

          Toastify({
            text: "successfully!",
            duration: 3000,
            close: true,
            gravity: "top",
          }).showToast();
        } catch (error) {
          console.error(error);
        }
      };
      const dataget = async () => {
        try {
          const response1 = await axios.get(
            "https://oemdieselparts.com/pic/changewatermark"
          );
          const data = response1.data;

          document.getElementById("demo").value = data.watermark;
          document.getElementById("degvalue").innerHTML = data.deg + "&deg;";
          document.getElementById("vol").value = data.deg;
          const imgElement = document.getElementById("imgdiv");
          imgElement.setAttribute("src", data.imagewatermark);
          // document
            // .getElementById(data.imagestyle + "btn")
            // .classList.add("border12");
          if (response1.data.watermarktype === "image") {
            document.getElementById("flexSwitchCheckDefault").checked = true;
            document
              .getElementById("textwatermark")
              .classList.remove("deactive");
            document.getElementById("keyboard_box").classList.add("deactive");
          } else {
            document.getElementById("flexSwitchCheckDefault").checked = false;
            document.getElementById("textwatermark").classList.add("deactive");
            document
              .getElementById("keyboard_box")
              .classList.remove("deactive");
          }
        } catch (err) {
          console.log(err);
        }
      };
      dataget();

      const Switch1 = async () => {
        const checkbox = document.getElementById("flexSwitchCheckDefault");
        let status;

        if (checkbox.checked) {
          document.getElementById("textwatermark").classList.remove("deactive");
          document.getElementById("keyboard_box").classList.add("deactive");

          status = "image";
        } else {
          document.getElementById("textwatermark").classList.add("deactive");
          document.getElementById("keyboard_box").classList.remove("deactive");

          status = "text";
        }
        try {
          const response = await axios.post(
            "https://oemdieselparts.com/pic/changewatermark",
            {
              id: "648ab1684855601a64bcdf5d",
              watermarktype: status,
            }
          );
        } catch (error) {
          console.error(error);
        }
      };
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
